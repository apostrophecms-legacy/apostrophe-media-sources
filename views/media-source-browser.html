{% extends "apostrophe-modal:base.html" %}
{% import 'apostrophe-ui:components/buttons.html' as buttons %}
{% import 'apostrophe-ui:components/fields.html' as fields with context %}

{% block label %}Browse {{ data.provider }} Images{% endblock %}

{% block controls %}
  <div class="apos-modal-controls">
    {{ buttons.minor('Finished', { action: 'cancel' }) }}
    {{ buttons.major('Import', { action: 'import', attributes: 'data-import' }) }}
  </div>
{% endblock %}

{% block filters %}
  <div class="apos-clearfix apos-modal-filters-inner" data-filters>
    <form class="apos-modal-filters-toggles" data-media-sources-form>
      <div class="apos-modal-filters-wrapper apos-modal-filters-wrapper--left">
        <span class="apos-modal-filter">
          <label>{{ __ns('apostrophe', 'Select') }}</label>
          <div class="apos-modal-filter--padded">
            {{ fields.checkbox('select-all') }}
          </div>
        </span>

        {% for filter in data.options.filters %}
          {% if filter.type !== 'search' %}
            <div class="apos-modal-filter">
              <label>{{ __ns('apostrophe', filter.label) }}</label>
              {% if filter.type === 'input' %}
                <div class="apos-field-group">
                  <input
                    class="apos-field-input apos-field-input-text"
                    type="number"
                    min="0"
                    data-media-sources-{{ filter.name }}-value
                    data-media-sources-filter
                    title="{{ filter.name }}"
                  />
                  {% if filter.range %}
                    <div class="apos-field-input-select-wrapper">
                      <select
                        class="apos-field-input apos-field-input-select"
                        data-media-sources-{{ filter.name }}-range
                      >
                        <option>{{ __ns('apostrophe', 'Min') }}</option>
                        <option>{{ __ns('apostrophe', 'Max') }}</option>
                      </select>
                    </div>
                  {% endif %}
                </div>
              {% elif filter.type === 'select' %}
                <div class="apos-field-input-select-wrapper">
                  <select
                    class="apos-field-input apos-field-input-select"
                    data-media-sources-{{ filter.name }}
                    data-media-sources-filter
                    title="{{ filter.name }}"
                  >
                    {% for choice in filter.choices %}
                      <option value="{{ choice.value }}">{{ __ns('apostrophe', choice.label) }}</option>
                    {% endfor %}
                  </select>
                </div>
              {% endif %}
            </div>
          {% endif %}
        {% endfor %}
      </div>

      {% for filter in data.options.filters %}
        {% if filter.type === 'search' %}
          <div class="apos-modal-filters-wrapper apos-modal-filters-wrapper--right">
            <div class="apos-modal-filters-{{ filter.name }}">
              <input
                class="apos-field-input apos-field-input-text"
                type="text"
                placeholder="{{ __ns('apostrophe', filter.label) }}"
                data-media-sources-{{ filter.name }}
                data-media-sources-filter
                title="{{ filter.name }}"
              />
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </form>
  </div>
{% endblock %}

{% block body %}New content here{% endblock %}
