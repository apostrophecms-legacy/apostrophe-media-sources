{% extends "apostrophe-modal:base.html" %}
{% import 'apostrophe-ui:components/buttons.html' as buttons %}
{% import 'apostrophe-ui:components/fields.html' as fields with context %}
{% import 'apostrophe-pager:macros.html' as pager with context %}

{% block label %}{{ data.label }} Images{% endblock %}

{% block controls %}
  <div class="apos-modal-controls">
    {{ buttons.minor('Finished', { action: 'cancel' }) }}
    {{ buttons.base('Import', {
        action: 'import',
        attributes: 'data-apos-import'
        }, 'apos-button--major apos-button--disabled')
    }}
  </div>
{% endblock %}

{% block filters %}
  <div
    class="apos-clearfix apos-modal-filters-inner"
    data-filters
    data-provider="{{data.label}}">
    <div class="apos-modal-filters-toggles">
      <div class="apos-modal-filters-wrapper apos-modal-filters-wrapper--left">
        <div class="apos-modal-filter">
          <label>{{ __ns('apostrophe', 'Select') }}</label>
          <div class="apos-modal-filter--padded">
            {{ fields.checkbox('select-all') }}
          </div>
        </div>

        {% if 'orientation' in data.standardFilters %}
          <div class="apos-modal-filter">
            <label>{{ __ns('apostrophe', 'Orientation') }}</label>
            <div class="apos-field-input-select-wrapper">
              <select
                name="orientation"
                class="apos-field-input apos-field-input-select"
                data-media-sources-filter
              >
                <option value="">{{ __ns('apostrophe', 'All') }}</option>
                <option value="landscape">{{ __ns('apostrophe', 'Landscape') }}</option>
                <option value="portrait">{{ __ns('apostrophe', 'Portrait') }}</option>
                <option value="square">{{ __ns('apostrophe', 'Square') }}</option>
              </select>
            </div>
          </div>
        {% endif %}

        {% for filter in data.customFilters %}
          <div class="apos-modal-filter">
            <label>{{ __ns('apostrophe', filter.label) }}</label>
            {% if filter.type === 'select' %}
              <div class="apos-field-input-select-wrapper">
                <select
                  name="{{filter.name}}"
                  class="apos-field-input apos-field-input-select"
                  data-media-sources-filter
                >
                  {% for choice in filter.choices %}
                    <option value="{{ choice.value }}">{{ __ns('apostrophe', choice.label) }}</option>
                  {% endfor %}
                </select>
              </div>
            {% else %}
              <div class="apos-field-group">
                <input
                  name="{{ filter.name }}"
                  class="apos-field-input apos-field-input-text"
                  type="{{ filter.inputType or 'text' }}"
                  {% if filter.inputType === 'number' -%} min="0" {%- endif %}
                  data-media-sources-filter
                />
                {% if filter.range %}
                  <div class="apos-field-input-select-wrapper">
                    <select
                      class="apos-field-input apos-field-input-select"
                      data-media-sources-{{ filter.name }}-range
                    >
                      <option>{{ __ns('apostrophe', 'Min') }}</option>
                      <option>{{ __ns('apostrophe', 'Max') }}</option>
                    </select>
                  </div>
                {% endif %}
              </div>
            {% endif %}
          </div>
        {% endfor %}
      </div>

      {% if 'search' in data.standardFilters %}
        <div class="apos-modal-filters-wrapper apos-modal-filters-wrapper--right">
          <div class="apos-modal-filters-search">
            <input
              name="search"
              class="apos-field-input apos-field-input-text"
              type="text"
              placeholder="{{ __ns('apostrophe', 'Search Images...') }}"
              data-media-sources-filter
            />
          </div>
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}

{# Populated with Ajax when searching for images #}
{% block body %}
<div class="apos-manage-view">
  <div class="apos-manage-grid-view">
    <div class="apos-manage-showing">
      <div class='apos-manage-result-label' data-result-label></div>
    </div>
    <div class="apos-manage-grid-page" data-items></div>
  </div>
</div>
{% endblock %}

{# Populated with Ajax when searching for images #}
{% block footer %}
  <div class="apos-modal-footer-inner">
    <div class="apos-ui">
      <div class="apos-pager" data-media-sources-pager></div>
    </div>
  </div>
{% endblock %}

